{% load static %}
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Planora âœ¨{% endblock %}</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Fredoka','Noto Sans TC',sans-serif;
      color: #1e293b;
      overflow-x: hidden;
      transition: background 1.5s ease, color 1s ease;
    }
    #navbar.navbar-day {
      background: rgba(255, 255, 255, 0.75);
      color: #1e293b;
      box-shadow: 0 4px 20px rgba(255, 192, 203, 0.3);
      backdrop-filter: blur(10px);
      transition: background 1s ease, color 0.8s ease;
    }
    #navbar.navbar-night {
      background: rgba(40, 20, 60, 0.6);
      color: #f8fafc;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      transition: background 1s ease, color 0.8s ease;
    }
    #navbar a { transition: color 0.4s ease; }
    body.home-day #navbar a:hover { color: #f472b6; }
    body.home-night #navbar a:hover { color: #ffcc88; }
    footer { transition: color 0.5s ease; }

    /* ğŸ’« ä½¿ç”¨è€…åå­—æŸ”å…‰æ•ˆæœ */
    .username-glow {
      color: #f9c97a;
      text-shadow: 0 0 6px rgba(255, 210, 120, 0.8), 0 0 12px rgba(255, 200, 90, 0.4);
      transition: text-shadow 0.5s ease, color 0.5s ease;
    }
    body.home-day .username-glow {
      color: #e97da1;
      text-shadow: 0 0 8px rgba(255, 180, 200, 0.5);
    }

    /* ğŸŒ¸ ç™»å…¥ï¼ç™»å‡ºéµï¼šç™½å¤© / å¤œé–“è‡ªå‹•æ›è‰² */
    .auth-btn {
      transition: all 0.4s ease;
    }

    /* â˜€ï¸ ç™½å¤©æ¨£å¼ */
    body.home-day .login-btn {
      background: linear-gradient(to right, #a855f7cc, #ec4899cc);
      box-shadow: 0 0 10px rgba(168, 85, 247, 0.3);
    }
    body.home-day .logout-btn {
      background: linear-gradient(to right, #ec4899cc, #a855f7cc);
      box-shadow: 0 0 10px rgba(236, 72, 153, 0.3);
    }

    /* ğŸŒ™ å¤œé–“æ¨£å¼ */
    body.home-night .login-btn {
      background: linear-gradient(to right, #db2777cc, #7c3aedcc);
      box-shadow: 0 0 12px rgba(219, 39, 119, 0.35);
    }
    body.home-night .logout-btn {
      background: linear-gradient(to right, #7c3aedcc, #db2777cc);
      box-shadow: 0 0 12px rgba(124, 58, 237, 0.35);
    }

    /* hover å‹•ç•« */
    .auth-btn:hover {
      opacity: 0.9;
      transform: scale(1.05);
    }
  </style>
</head>

<body class="min-h-screen flex flex-col transition-colors duration-700">
  <!-- ğŸ”¹ å°èˆªåˆ— -->
  <nav id="navbar" class="navbar-day flex justify-between items-center px-8 py-4 sticky top-0 z-50">
    <div class="flex items-center space-x-6 font-semibold text-lg">
      <a href="{% url 'core:home' %}" class="hover:text-pink-500 transition">ğŸ  Home</a>
      <a href="{% url 'personal:personal_calendar' %}" class="hover:text-blue-500 transition">ğŸª„ Personal</a>
    </div>

    <!-- ğŸ” ç™»å…¥ï¼ç™»å‡º -->
    {% if user.is_authenticated %}
      <div class="flex items-center space-x-3">
        <span class="font-medium username-glow">
          ğŸ‘‹ {{ user.username }}
        </span>
        <a href="{% url 'accounts:logout' %}" 
           class="logout-btn auth-btn px-3 py-1 rounded-lg text-white font-semibold shadow-md transition">
            ç™»å‡º
        </a>
      </div>
    {% else %}
      <a href="{% url 'accounts:login' %}"
         class="login-btn auth-btn px-3 py-1 rounded-lg text-white font-semibold shadow-md transition">
         ğŸ” ç™»å…¥
      </a>
    {% endif %}
  </nav>

  <!-- âœ¨ æç¤ºè¨Šæ¯ï¼ˆç™»å…¥ï¼ç™»å‡ºç­‰ï¼‰ -->
  {% if messages %}
    <div class="fixed top-6 left-1/2 transform -translate-x-1/2 z-50 space-y-2">
      {% for message in messages %}
        <div class="px-6 py-3 rounded-xl shadow-lg text-white text-center backdrop-blur-lg bg-opacity-70
                    {% if message.tags == 'success' %}
                      bg-gradient-to-r from-purple-500/90 to-pink-400/90
                    {% elif message.tags == 'error' %}
                      bg-gradient-to-r from-red-500/90 to-pink-500/90
                    {% elif message.tags == 'warning' %}
                      bg-gradient-to-r from-yellow-400/90 to-orange-400/90
                    {% else %}
                      bg-gray-700/80
                    {% endif %}
                    transition duration-500 animate-fade-in-out">
          {% if message.tags == 'success' %}
            âœ¨ {{ message }}
          {% elif message.tags == 'error' %}
            âŒ {{ message }}
          {% elif message.tags == 'warning' %}
            âš ï¸ {{ message }}
          {% else %}
            ğŸ’¬ {{ message }}
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <style>
      /* âœ¨ Planora æç¤ºå‹•ç•« */
      @keyframes fadeInOut {
        0% { opacity: 0; transform: translateY(-10px); }
        10% { opacity: 1; transform: translateY(0); }
        90% { opacity: 1; transform: translateY(0); }
        100% { opacity: 0; transform: translateY(-10px); }
      }
      .animate-fade-in-out {
        animation: fadeInOut 4s ease-in-out forwards;
      }
    </style>
  {% endif %}

  <!-- ğŸ”¸ ä¸»å…§å®¹ -->
  <main class="flex-1 px-6 md:px-12 py-10">
    {% block content %}{% endblock %}
  </main>

  <!-- ğŸ”¹ é å°¾ -->
  <footer class="text-center py-6 text-sm opacity-70">
    Â© 2025 Planora â€” Dream, Plan, Create âœ¨
  </footer>

  <!-- âœ¨ å°èˆªåˆ—è‡ªå‹•åˆ‡æ› -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const navbar = document.getElementById("navbar");
      const observer = new MutationObserver(() => {
        if (document.body.classList.contains("home-night")) {
          navbar.classList.remove("navbar-day");
          navbar.classList.add("navbar-night");
        } else {
          navbar.classList.remove("navbar-night");
          navbar.classList.add("navbar-day");
        }
      });
      observer.observe(document.body, { attributes: true, attributeFilter: ["class"] });
    });
  </script>



<!-- å…¨ç«™å…±ç”¨ JSï¼ˆå…ˆè¼‰ utilsï¼‰ -->
<script src="{% static 'core/js/utils.js' %}"></script>

<!-- å„é é¢çš„ JS -->
{% block extra_js %}{% endblock %}

</body>
</html>





